(()=>{"use strict";class t{constructor(t){this.boxes=document.querySelectorAll(t),this.handleBox=this.handleBox.bind(this),this.handleClickDocument=this.handleClickDocument.bind(this)}resetBoxes(){this.boxes.forEach((t=>{t.classList.remove("active")}))}handleBox(t){const e=t.target;if(e.classList.contains("active"))return e.classList.remove("active");this.resetBoxes(),e.classList.add("active")}handleClickDocument(t){if(39===t.keyCode||37===t.keyCode)return this.handleKeys(t)}handleKeys(t){const e=t.keyCode;let s=null;this.boxes.forEach(((t,e)=>{t.classList.contains("active")&&(s=e)})),this.resetBoxes(),null===s&&(s=39===e?-1:this.boxes.length),39===e?s==this.boxes.length-1?s=this.boxes.length-1:s+=1:37===e&&s>0&&(s-=1),this.boxes[s].classList.add("active")}init(){this.boxes.forEach((t=>{t.addEventListener("click",this.handleBox)})),document.addEventListener("keydown",this.handleClickDocument)}}class e{constructor(){this.arrayText=["word2.txt"],this.arrayReady=[]}async getWords(t){const e=await fetch(t),s=(await e.text()).replace(/[\[\]"]/g," ").split(","),i=[];return s.forEach((t=>{i.push(t.trim().toUpperCase())})),i}joinWords(t){t.forEach((t=>{this.arrayReady.includes(t)||this.arrayReady.push(t)}))}get arrayCompleted(){return this.arrayReady}async init(){for(const t of this.arrayText){const e=await this.getWords(t);this.joinWords(e)}}}class s{constructor(t,e){this.wordDB=t.split(""),this.letterPosition=e,this.letterValid=0,this.letterMarried=0}validateLetter(){this.letterPosition.forEach((t=>{t&&(this.letterValid+=1)}))}compareWords(){for(let t in this.letterPosition)this.letterPosition[t]===this.wordDB[t]&&(this.letterMarried+=1)}init(){return this.validateLetter(),this.compareWords(),this.letterValid===this.letterMarried}}const i=new class{constructor(t,e,s){this.btn=document.querySelector(t),this.letters=document.querySelectorAll(e),this.positionLetters=[],this.result=document.querySelector(s),this.number=document.querySelector(".number-result"),this.startSearch=this.startSearch.bind(this)}getLetters(){let t=!1;return this.letters.forEach((e=>{if(!e.innerText)return this.positionLetters.push(null);this.positionLetters.push(e.innerText),t=!0})),t}resetInfos(){this.result.innerHTML=[],this.number.innerText=0}toCompare(){const t=[];return this.arrayWords.forEach((e=>{let i=null;i=e.includes(":")?e.slice(0,5):e,new s(i,this.positionLetters).init()&&t.push(e)})),this.positionLetters=[],t}insertWordsMarriedes(t){const e=[];for(const s of t)s.includes(":")?e.push(s.slice(6,11)):e.push(s);for(let t of e){const e=document.createElement("li");e.innerText=t,this.result.appendChild(e)}this.number.innerText=e.length}startSearch(){if(this.resetInfos(),this.activeResult(!1),!this.getLetters())return;const t=this.toCompare();!t.length>0||(this.insertWordsMarriedes(t),this.activeResult(!0))}activeResult(t){const e=document.querySelector(".container-result");return t?e.classList.add("active"):e.classList.remove("active")}init(t){this.arrayWords=t,this.btn.addEventListener("click",this.startSearch)}}(".btn-search",".write li",".result");(async()=>{const t=new e;await t.init(),i.init(t.arrayCompleted)})(),new t(".write li").init();new class extends t{constructor(t){super(t),this.boxes=document.querySelectorAll(t),this.boxIsActive=this.boxIsActive.bind(this)}nextBox(t,e){let s=Number(t)+e;this.boxes[t].classList.remove("active"),s>=this.boxes.length||this.boxes[s].classList.add("active")}insertInStart(t){this.boxes[0].innerText=t,this.nextBox(0,1)}clickButton(){document.querySelector(".btn-search").click()}deleteLetter(){let t=null;for(let e in this.boxes){if(!this.boxes[e].classList)break;if(this.boxes[e].classList.contains("active")){this.boxes[e].innerText="",t=e;break}}if(t<=0)return this.resetBoxes();this.nextBox(t,-1)}boxIsActive(t){const e=t.key.toUpperCase();let s=!0;if(8===t.keyCode)return this.deleteLetter();if(13===t.keyCode)return this.clickButton();if(!(t.keyCode<65||t.keyCode>90)){if(this.boxes.forEach((t=>{if(t.classList.contains("active"))return s=!1})),s)return this.insertInStart(e);for(let t in Array.from(this.boxes))if(this.boxes[t].classList.contains("active"))return this.boxes[t].innerText=e,void this.nextBox(t,1)}}init(){document.addEventListener("keydown",this.boxIsActive)}}(".write li").init()})();